<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Data Storage · datadocs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## HDFS"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Data Storage · datadocs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://polakowo.github.io/datadocs/"/><meta property="og:description" content="## HDFS"/><meta property="og:image" content="https://polakowo.github.io/datadocs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://polakowo.github.io/datadocs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/datadocs/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-142521178-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-142521178-1');
            </script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/datadocs/js/code-block-buttons.js"></script><script type="text/javascript" src="/datadocs/js/disqus.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/datadocs/js/scrollSpy.js"></script><link rel="stylesheet" href="/datadocs/css/prism.css"/><link rel="stylesheet" href="/datadocs/css/main.css"/><script src="/datadocs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/datadocs/"><h2 class="headerTitle">datadocs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/datadocs/docs/machine-learning/linear-models" target="_self">Docs</a></li><li class=""><a href="https://github.com/polakowo/datadocs" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/polakowo/datadocs/edit/master/docs/big-data/data-storage.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Data Storage</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="hdfs"></a><a href="#hdfs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HDFS</h2>
<p><center><img width=250 src="/datadocs/assets/41502d489ace02f2857ca90d1d78cc76.png"/></center></p>
<ul>
<li>The Hadoop Distributed File System (HDFS) is a distributed file system designed to run on commodity hardware (GNU/Linux).</li>
<li>Originally built as infrastructure for the Apache Nutch web search engine.</li>
<li>Takes as its design guides elements from Google File System (GFS).</li>
<li>HDFS is highly fault tolerant, available, reliable and scalable.</li>
<li>Accommodation of large data sets:
<ul>
<li>A typical file in HDFS is gigabytes to terabytes in size.</li>
<li>It stores each file as a sequence of blocks (typically 128MB)</li>
<li>A file once created, written, and closed need not be changed.</li>
<li>HDFS uses client side caching to improve performance.</li>
</ul></li>
<li>Fast recovery from hardware failures:
<ul>
<li>HDFS has been built to detect faults and automatically recover quickly.</li>
<li>The blocks of a file are replicated for fault tolerance (configurable by the replication factor)</li>
<li>Files in HDFS are write-once and have strictly one writer at any time.</li>
</ul></li>
<li>High availability:
<ul>
<li>This redundancy offers higher availability and data locality for efficient computation.</li>
<li>Large Hadoop clusters are arranged in racks (network traffic within desirable)</li>
</ul></li>
<li>Access to streaming data:
<ul>
<li>HDFS is intended more for batch processing versus interactive use.</li>
<li>High bandwidth more important than low latency.</li>
</ul></li>
<li>Portability:
<ul>
<li>HDFS is designed to be portable across multiple hardware platforms.</li>
<li>Built using the Java language.</li>
</ul></li>
<li>Use cases:
<ul>
<li>MapReduce kind of workloads, similar to GFS.</li>
<li>Ideally suited for write-once and read-many times use cases.</li>
<li><a href="http://hadoopilluminated.com/hadoop_illuminated/Hadoop_Use_Cases.html">Hadoop Use Cases and Case Studies</a></li>
</ul></li>
<li>HDFS is partly POSIX-compliant.</li>
<li>HDFS is at the core of many open-source data lakes.</li>
<li>With Apache Hadoop 2.0 (2013), YARN resource manager was added, and MapReduce and HDFS were effectively decoupled.</li>
<li>With Apache Hadoop 3.0 (2017), HDFS supports additional NameNodes, erasure coding facilities and greater data compression.</li>
<li><a href="https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html">HDFS Architecture Guide</a></li>
</ul>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Example: Create a directory named /foodir</span>

$ bin/hadoop dfs -mkdir /foodir
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="posix"></a><a href="#posix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>POSIX</h4>
<ul>
<li>POSIX is a family of IEEE standards, specified by the , to clarify and make uniform the API provided by UNIX operating systems.</li>
<li>Programs can read and write to the distributed data store as if the data were mounted locally.</li>
<li>Limited POSIX compliance also extended to various versions of Windows.</li>
<li><a href="https://stackoverflow.com/a/31865755">Most important things POSIX 7 defines</a></li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="compared-to-cloud-storage-s3"></a><a href="#compared-to-cloud-storage-s3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compared to cloud storage (S3)</h4>
<ul>
<li>Cost: S3 is 5x cheaper than HDFS.</li>
<li>Elasticity: S3 supports elasticity and pay-as-you-go pricing model, HDFS does not.</li>
<li>SLA (Availability and Durability): S3’s availability and durability is far superior to HDFS’.</li>
<li>Data locality: On a per node basis, HDFS can yield 6x higher read throughput than S3.</li>
<li>Performance per Dollar: Given that the S3 is 10x cheaper than HDFS, S3 is almost 2x better compared to HDFS on performance per dollar.</li>
<li>Compute: Separation of cloud storage and compute allows for new Spark applications.</li>
<li><a href="https://cloud.google.com/blog/products/storage-data-transfer/hdfs-vs-cloud-storage-pros-cons-and-migration-tips">HDFS vs. Cloud Storage: Pros, cons and migration tips</a></li>
<li><a href="https://databricks.com/blog/2017/05/31/top-5-reasons-for-choosing-s3-over-hdfs.html">Top 5 Reasons for Choosing S3 over HDFS</a></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="components"></a><a href="#components" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Components</h3>
<ul>
<li>HDFS has a master/slave architecture.
<ul>
<li>Clients contact NameNode for file metadata or file modifications and perform actual file I/O directly with the DataNodes.</li>
</ul></li>
</ul>
<p><img width=500 src="/datadocs/assets/hdfsarchitecture.gif"/>
<center><a href="https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html" class="credit">Credit</a></center></p>
<ul>
<li>NameNode:
<ul>
<li>A master server that manages the file system namespace and regulates access to files by clients.</li>
<li>Also determines the mapping of blocks to DataNodes.</li>
<li>User data never flows through the NameNode.</li>
<li>Usually a dedicated machine that runs only the NameNode software.</li>
<li>High availability mode: two separate machines are configured as NameNodes (Active/Standby), edit log file stored in the shared directory, ZooKeeper tracks active NameNode, uses extreme measures to ensure that only one NameNode is used at a time (can cut the power physically)</li>
</ul></li>
<li>DataNodes:
<ul>
<li>Manage storage attached to the nodes that they run on.</li>
<li>Perform block creation, deletion, and replication upon instruction from the NameNode.</li>
<li>Also responsible for serving read and write requests from clients.</li>
<li>Usually one per node.</li>
</ul></li>
<li>Example of replication pipeline:
<ul>
<li>When a client is writing data to an HDFS file, its data is first written to a local cache. When the local file accumulates a full block of user data, the client retrieves a list of DataNodes from the NameNode. The client then flushes the data block to the first DataNode. The first DataNode starts receiving the data in small portions (4 KB), writes each portion to its local repository and transfers that portion to the second DataNode in the list. And so on.</li>
</ul></li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-9-7 by Oleg Polakow</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#hdfs">HDFS</a><ul class="toc-headings"><li><a href="#components">Components</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><div class="brand-box"><div class="brand"><a href="https://www.tum.de/nc/en/" target="_blank" rel="noreferrer noopener" class="brand-link"><img src="/datadocs/img/tum_logo.png" alt="Technical University of Munich" height="45"/></a></div><div class="brand"><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="brand-link"><img src="/datadocs/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a></div></div><section class="copyright">Copyright © 2019 polakowo.io</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '6642fca03d716a543ac4428d7d20b842',
                indexName: 'polakowo-datadocs',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>